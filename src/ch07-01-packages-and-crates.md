## بسته‌ها و کرت‌ها

اولین بخش‌هایی که در سیستم ماژول بررسی خواهیم کرد، بسته‌ها و کرت‌ها هستند.

یک _کرت_ کوچک‌ترین واحد کدی است که کامپایلر Rust در یک زمان در نظر می‌گیرد. حتی اگر به جای `cargo` از `rustc` استفاده کنید و یک فایل کد منبع را ارسال کنید (همان‌طور که در بخش «نوشتن و اجرای یک برنامه Rust» در فصل ۱ انجام دادیم)، کامپایلر آن فایل را به عنوان یک کرت در نظر می‌گیرد. کرت‌ها می‌توانند شامل ماژول‌ها باشند، و این ماژول‌ها ممکن است در فایل‌های دیگری تعریف شوند که همراه با کرت کامپایل می‌شوند، همان‌طور که در بخش‌های آینده خواهیم دید.

یک کرت می‌تواند به یکی از دو شکل باشد: کرت باینری یا کرت کتابخانه‌ای. 
_کرت‌های باینری_ برنامه‌هایی هستند که می‌توانید آن‌ها را به یک فایل اجرایی کامپایل کنید و اجرا کنید، مانند یک برنامه خط فرمان یا یک سرور. هر کرت باینری باید یک تابع به نام `main` داشته باشد که مشخص کند وقتی فایل اجرایی اجرا می‌شود چه اتفاقی می‌افتد. تمامی کرت‌هایی که تاکنون ایجاد کرده‌ایم، کرت‌های باینری بوده‌اند.

_کرت‌های کتابخانه‌ای_ تابع `main` ندارند و به یک فایل اجرایی کامپایل نمی‌شوند. بلکه، آن‌ها عملکردهایی را تعریف می‌کنند که برای اشتراک‌گذاری میان چندین پروژه طراحی شده‌اند. به عنوان مثال، کرت `rand` که در [فصل ۲][rand] از آن استفاده کردیم، قابلیت تولید اعداد تصادفی را فراهم می‌کند. اغلب اوقات وقتی Rustaceanها می‌گویند "کرت"، منظورشان کرت کتابخانه‌ای است، و آن را به صورت متناوب با مفهوم عمومی برنامه‌نویسی "کتابخانه" استفاده می‌کنند.

_ریشه کرت_ یک فایل منبع است که کامپایلر Rust از آن شروع می‌کند و ریشه ماژول کرت را تشکیل می‌دهد (ماژول‌ها را در بخش [«تعریف ماژول‌ها برای کنترل محدوده و حریم خصوصی»][modules] به طور کامل بررسی خواهیم کرد).

یک _بسته_ مجموعه‌ای از یک یا چند کرت است که مجموعه‌ای از عملکردها را فراهم می‌کند. یک بسته شامل یک فایل _Cargo.toml_ است که توضیح می‌دهد چگونه باید این کرت‌ها ساخته شوند. Cargo خود یک بسته است که شامل کرت باینری ابزار خط فرمانی که از آن برای ساخت کدتان استفاده کرده‌اید می‌شود. بسته Cargo همچنین شامل یک کرت کتابخانه‌ای است که کرت باینری به آن وابسته است. پروژه‌های دیگر می‌توانند به کرت کتابخانه‌ای Cargo وابسته شوند تا از همان منطقی که ابزار خط فرمان Cargo استفاده می‌کند بهره‌مند شوند. یک بسته می‌تواند شامل هر تعداد کرت باینری باشد که می‌خواهید، اما در بیشترین حالت تنها یک کرت کتابخانه‌ای می‌تواند داشته باشد. یک بسته باید حداقل یک کرت شامل باشد، چه آن کرت یک کتابخانه باشد یا یک کرت باینری.

بیایید ببینیم وقتی یک بسته ایجاد می‌کنیم چه اتفاقی می‌افتد. ابتدا دستور `cargo new my-project` را وارد می‌کنیم:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

بعد از اجرای `cargo new my-project`، از دستور `ls` استفاده می‌کنیم تا ببینیم Cargo چه چیزی ایجاد کرده است. در دایرکتوری پروژه، یک فایل _Cargo.toml_ وجود دارد که به ما یک بسته می‌دهد. همچنین یک دایرکتوری _src_ وجود دارد که شامل فایل _main.rs_ است. فایل _Cargo.toml_ را در ویرایشگر متن خود باز کنید و توجه کنید که هیچ اشاره‌ای به _src/main.rs_ نشده است. Cargo از یک قرارداد پیروی می‌کند که _src/main.rs_ ریشه کرت یک کرت باینری با همان نام بسته است. به همین ترتیب، Cargo می‌داند که اگر دایرکتوری بسته شامل _src/lib.rs_ باشد، بسته شامل یک کرت کتابخانه‌ای با همان نام بسته است و _src/lib.rs_ ریشه کرت آن است. Cargo فایل‌های ریشه کرت را به `rustc` ارسال می‌کند تا کتابخانه یا فایل اجرایی ساخته شود.

در اینجا، ما یک بسته داریم که تنها شامل _src/main.rs_ است، به این معنی که تنها یک کرت باینری به نام `my-project` دارد. اگر یک بسته شامل _src/main.rs_ و _src/lib.rs_ باشد، آن بسته دو کرت خواهد داشت: یک کرت باینری و یک کتابخانه، هر دو با همان نام بسته. یک بسته می‌تواند چندین کرت باینری داشته باشد با قرار دادن فایل‌ها در دایرکتوری _src/bin_: هر فایل یک کرت باینری جداگانه خواهد بود.

[modules]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[rand]: ch02-00-guessing-game-tutorial.html#generating-a-random-number
