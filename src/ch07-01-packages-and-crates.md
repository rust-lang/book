## الحزم والصناديق

الأجزاء الأولى من نظام الوحدات التي سنغطيها هي الحزم والصناديق.

_الصندوق_ (crate) هو أصغر كمية من الكود التي يأخذها مُصرِّف Rust في الاعتبار في
وقت واحد. حتى لو قمت بتشغيل `rustc` بدلاً من `cargo` ومررت ملف كود مصدري واحد
(كما فعلنا في البداية في [«أساسيات برنامج Rust»][basics]<!-- ignore
--> في الفصل 1)، فإن المُصرِّف يعتبر ذلك الملف صندوقاً. يمكن أن تحتوي الصناديق على
وحدات، وقد تُعرَّف الوحدات في ملفات أخرى يتم تصريفها مع الصندوق، كما سنرى في
الأقسام القادمة.

يمكن أن يأتي الصندوق في أحد شكلين: صندوق ثنائي أو صندوق مكتبة.
_الصناديق الثنائية_ هي برامج يمكنك تصريفها إلى ملف تنفيذي يمكنك تشغيله،
مثل برنامج سطر الأوامر أو خادم. يجب أن يحتوي كل منها على دالة تسمى
`main` تحدد ما يحدث عند تشغيل الملف التنفيذي. جميع الصناديق التي
أنشأناها حتى الآن كانت صناديق ثنائية.

_صناديق المكتبة_ لا تحتوي على دالة `main`، ولا يتم تصريفها إلى ملف
تنفيذي. بدلاً من ذلك، فإنها تعرف وظائف مخصصة ليتم مشاركتها مع
مشاريع متعددة. على سبيل المثال، صندوق `rand` الذي استخدمناه في [الفصل
2][rand]<!-- ignore --> يوفر وظائف لتوليد الأرقام العشوائية.
في معظم الأوقات عندما يقول مستخدمو Rust «صندوق»، فإنهم يقصدون صندوق مكتبة، ويستخدمون
«صندوق» بالتبادل مع مفهوم البرمجة العام «مكتبة».

_جذر الصندوق_ هو ملف مصدري يبدأ منه مُصرِّف Rust ويشكل
الوحدة الجذرية للصندوق الخاص بك (سنشرح الوحدات بعمق في [«التحكم في
النطاق والخصوصية باستخدام الوحدات»][modules]<!-- ignore -->).

_الحزمة_ هي مجموعة من صندوق واحد أو أكثر توفر مجموعة من
الوظائف. تحتوي الحزمة على ملف _Cargo.toml_ يصف كيفية
بناء تلك الصناديق. Cargo في الواقع حزمة تحتوي على الصندوق الثنائي
لأداة سطر الأوامر التي كنت تستخدمها لبناء كودك. حزمة Cargo
تحتوي أيضاً على صندوق مكتبة يعتمد عليه الصندوق الثنائي. المشاريع الأخرى
يمكن أن تعتمد على صندوق مكتبة Cargo لاستخدام نفس المنطق الذي تستخدمه أداة
سطر أوامر Cargo.

يمكن أن تحتوي الحزمة على أي عدد تريده من الصناديق الثنائية، ولكن على الأكثر صندوق
مكتبة واحد فقط. يجب أن تحتوي الحزمة على صندوق واحد على الأقل، سواء كان
صندوق مكتبة أو صندوق ثنائي.

لنتابع ما يحدث عندما ننشئ حزمة. أولاً، ندخل
الأمر `cargo new my-project`:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

بعد أن نشغل `cargo new my-project`، نستخدم `ls` لنرى ما ينشئه Cargo. في
دليل _my-project_، يوجد ملف _Cargo.toml_، مما يعطينا حزمة.
يوجد أيضاً دليل _src_ يحتوي على _main.rs_. افتح _Cargo.toml_ في
محرر النصوص الخاص بك ولاحظ أنه لا يوجد ذكر لـ _src/main.rs_. يتبع Cargo
اتفاقية أن _src/main.rs_ هو جذر صندوق ثنائي
بنفس اسم الحزمة. وبالمثل، يعلم Cargo أنه إذا كان دليل الحزمة
يحتوي على _src/lib.rs_، فإن الحزمة تحتوي على صندوق مكتبة
بنفس اسم الحزمة، و _src/lib.rs_ هو جذر الصندوق الخاص بها. يمرر Cargo
ملفات جذر الصندوق إلى `rustc` لبناء المكتبة أو الملف الثنائي.

هنا، لدينا حزمة تحتوي فقط على _src/main.rs_، مما يعني أنها تحتوي فقط على
صندوق ثنائي اسمه `my-project`. إذا كانت الحزمة تحتوي على _src/main.rs_
و _src/lib.rs_، فإنها تحتوي على صندوقين: صندوق ثنائي وصندوق مكتبة، كلاهما بنفس
اسم الحزمة. يمكن أن تحتوي الحزمة على صناديق ثنائية متعددة بوضع ملفات
في دليل _src/bin_: كل ملف سيكون صندوقاً ثنائياً منفصلاً.

[basics]: ch01-02-hello-world.html#rust-program-basics
[modules]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[rand]: ch02-00-guessing-game-tutorial.html#generating-a-random-number
