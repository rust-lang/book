# المقدمة

> ملاحظة: هذه النسخة من الكتاب هي نفسها [لغة البرمجة Rust][nsprust] المتاحة بصيغة مطبوعة وإلكترونية من [No Starch Press][nsp].

[nsprust]: https://nostarch.com/rust-programming-language-3rd-edition
[nsp]: https://nostarch.com/

مرحبًا بك في _لغة البرمجة Rust_، وهو كتاب تمهيدي عن Rust.
تساعدك لغة البرمجة Rust على كتابة برمجيات أسرع وأكثر موثوقية.
غالبًا ما تكون سهولة الاستخدام عالية المستوى (high-level ergonomics) والتحكم منخفض المستوى (low-level control) متعارضتين في تصميم لغات البرمجة؛ تتحدى Rust هذا الصراع. من خلال الموازنة بين القدرة التقنية القوية وتجربة مطور رائعة، تمنحك Rust خيار التحكم في التفاصيل منخفضة المستوى (مثل استخدام الذاكرة) دون كل المتاعب المرتبطة تقليديًا بهذا التحكم.

## لمن صُممت Rust

Rust مثالية للكثير من الأشخاص لأسباب متنوعة. دعنا نلقي نظرة على بعض من أهم المجموعات.

### فرق المطورين

تثبت Rust أنها أداة إنتاجية للتعاون بين فرق كبيرة من المطورين ذوي مستويات متفاوتة من معرفة برمجة الأنظمة (systems programming). الكود منخفض المستوى (low-level code) عرضة لأخطاء دقيقة متنوعة، والتي في معظم اللغات الأخرى لا يمكن اكتشافها إلا من خلال اختبارات مكثفة ومراجعة دقيقة للكود من قبل مطورين ذوي خبرة. في Rust، يلعب المصرِّف (compiler) دور حارس البوابة برفضه ترجمة الكود الذي يحتوي على هذه الأخطاء الخفية، بما في ذلك أخطاء التزامن (concurrency bugs). من خلال العمل جنبًا إلى جنب مع المصرِّف (compiler)، يمكن للفريق قضاء وقته في التركيز على منطق البرنامج بدلاً من تعقب الأخطاء.

تجلب Rust أيضًا أدوات المطورين المعاصرة إلى عالم برمجة الأنظمة:

- Cargo، مدير التبعيات (dependency manager) وأداة البناء (build tool) المضمنة، تجعل إضافة وتجميع وإدارة التبعيات (dependencies) سهلة ومتسقة عبر نظام Rust البيئي (ecosystem).
- أداة التنسيق (formatter) `rustfmt` تضمن أسلوب برمجة متسق عبر المطورين.
- خادم لغة Rust (Rust Language Server) يدعم تكامل بيئة التطوير المتكاملة (IDE - Integrated Development Environment) لإكمال الكود (code completion) ورسائل الخطأ المضمنة (inline error messages).

باستخدام هذه الأدوات وغيرها في نظام Rust البيئي، يمكن للمطورين أن يكونوا منتجين أثناء كتابة كود على مستوى الأنظمة.

### الطلاب

Rust موجهة للطلاب وأولئك المهتمين بتعلم مفاهيم الأنظمة (systems concepts). باستخدام Rust، تعلم الكثير من الأشخاص عن موضوعات مثل تطوير أنظمة التشغيل (operating systems development). المجتمع ترحيبي للغاية وسعيد بالإجابة على أسئلة الطلاب. من خلال جهود مثل هذا الكتاب، تريد فرق Rust جعل مفاهيم الأنظمة (systems concepts) أكثر سهولة في الوصول للمزيد من الأشخاص، خاصة أولئك الجدد في البرمجة.

### الشركات

تستخدم مئات الشركات، الكبيرة والصغيرة، Rust في الإنتاج (production) لمجموعة متنوعة من المهام، بما في ذلك أدوات سطر الأوامر (command-line tools)، وخدمات الويب (web services)، وأدوات DevOps، والأجهزة المدمجة (embedded devices)، وتحليل الصوت والفيديو وتحويلها، والعملات المشفرة (cryptocurrencies)، والمعلوماتية الحيوية (bioinformatics)، ومحركات البحث (search engines)، وتطبيقات إنترنت الأشياء (IoT applications)، والتعلم الآلي (machine learning)، وحتى أجزاء رئيسية من متصفح الويب Firefox.

### مطورو المصادر المفتوحة

Rust موجهة للأشخاص الذين يريدون بناء لغة البرمجة Rust، والمجتمع، وأدوات المطورين، والمكتبات. نحن نحب أن نراك تساهم في لغة Rust.

### الأشخاص الذين يقدرون السرعة والاستقرار

Rust موجهة للأشخاص الذين يتوقون للسرعة (speed) والاستقرار (stability) في اللغة. بالسرعة، نعني كلاً من مدى سرعة تشغيل كود Rust والسرعة التي تتيح لك Rust بها كتابة البرامج. فحوصات مصرِّف (compiler checks) Rust تضمن الاستقرار خلال إضافة الميزات (features) وإعادة الهيكلة (refactoring). هذا يتناقض مع الكود القديم الهش (brittle legacy code) في اللغات التي لا تحتوي على هذه الفحوصات، والذي غالبًا ما يخشى المطورون تعديله. من خلال السعي للحصول على تجريدات بدون تكلفة (zero-cost abstractions) - ميزات عالية المستوى (high-level features) تُترجم إلى كود منخفض المستوى (low-level code) بنفس سرعة الكود المكتوب يدويًا (hand-written code) - تسعى Rust لجعل الكود الآمن (safe code) كودًا سريعًا (fast code) أيضًا.

تأمل لغة Rust في دعم العديد من المستخدمين الآخرين أيضًا؛ المذكورون هنا هم فقط بعض من أكبر أصحاب المصلحة. بشكل عام، أكبر طموح لـ Rust هو إلغاء المقايضات التي قبلها المبرمجون لعقود من خلال توفير الأمان _والإنتاجية_، والسرعة _وسهولة الاستخدام_. جرب Rust، وانظر إذا كانت خياراتها تناسبك.

## لمن هذا الكتاب

يفترض هذا الكتاب أنك كتبت كودًا بلغة برمجة أخرى، لكنه لا يفترض أي شيء عن أيها. لقد حاولنا جعل المادة قابلة للوصول بشكل واسع لأولئك من مجموعة متنوعة من خلفيات البرمجة. لا نقضي الكثير من الوقت في الحديث عن _ماهية_ البرمجة أو كيفية التفكير فيها. إذا كنت جديدًا تمامًا على البرمجة، فستكون في وضع أفضل بقراءة كتاب يوفر على وجه التحديد مقدمة للبرمجة.

## كيفية استخدام هذا الكتاب

بشكل عام، يفترض هذا الكتاب أنك تقرأه بالتسلسل من الأمام إلى الخلف. تبني الفصول اللاحقة على المفاهيم في الفصول السابقة، وقد لا تتعمق الفصول السابقة في تفاصيل موضوع معين ولكنها ستعيد النظر في الموضوع في فصل لاحق.

ستجد نوعين من الفصول في هذا الكتاب: فصول المفاهيم (concept chapters) وفصول المشاريع (project chapters). في فصول المفاهيم، ستتعلم عن جانب من جوانب Rust. في فصول المشاريع، سنبني برامج صغيرة معًا، مطبقين ما تعلمته حتى الآن. الفصل 2 والفصل 12 والفصل 21 هي فصول مشاريع؛ الباقي فصول مفاهيم.

**الفصل 1** يشرح كيفية تثبيت Rust، وكيفية كتابة برنامج "مرحبًا، بالعالم!"، وكيفية استخدام Cargo، مدير الحزم وأداة البناء في Rust. **الفصل 2** هو مقدمة عملية لكتابة برنامج في Rust، حيث ستبني لعبة تخمين الأرقام. هنا، نغطي المفاهيم على مستوى عالٍ، وستوفر الفصول اللاحقة تفاصيل إضافية. إذا كنت ترغب في البدء عمليًا على الفور، فإن الفصل 2 هو المكان المناسب لذلك. إذا كنت متعلمًا دقيقًا بشكل خاص يفضل تعلم كل التفاصيل قبل الانتقال إلى التالي، فقد ترغب في تخطي الفصل 2 والذهاب مباشرة إلى **الفصل 3**، الذي يغطي ميزات Rust المشابهة لتلك الموجودة في لغات البرمجة الأخرى؛ ثم يمكنك العودة إلى الفصل 2 عندما ترغب في العمل على مشروع تطبق فيه التفاصيل التي تعلمتها.

في **الفصل 4**، ستتعلم عن نظام الملكية (ownership system) في Rust. **الفصل 5** يناقش البنيات (structs) والطرق (methods). **الفصل 6** يغطي التعدادات (enums)، وتعبيرات `match`، وبنيات التحكم في التدفق (control flow constructs) `if let` و `let...else`. ستستخدم البنيات (structs) والتعدادات (enums) لإنشاء أنواع مخصصة (custom types).

في **الفصل 7**، ستتعلم عن نظام الوحدات (module system) في Rust وعن قواعد الخصوصية (privacy rules) لتنظيم كودك وواجهة برمجة التطبيقات العامة (public API). **الفصل 8** يناقش بعض هياكل بيانات المجموعات (collection data structures) الشائعة التي توفرها المكتبة القياسية (standard library): المتجهات (vectors)، والسلاسل النصية (strings)، وخرائط التجزئة (hash maps). **الفصل 9** يستكشف فلسفة وتقنيات معالجة الأخطاء (error handling) في Rust.

**الفصل 10** يتعمق في الأنواع العمومية (generic types)، والسِمات (traits)، ومدد الصلاحية (lifetimes)، والتي تمنحك القدرة على تعريف كود ينطبق على أنواع متعددة (multiple types). **الفصل 11** كله عن الاختبار (testing)، والذي حتى مع ضمانات الأمان (safety guarantees) في Rust ضروري لضمان أن منطق برنامجك صحيح. في **الفصل 12**، سنبني تطبيقنا الخاص لمجموعة فرعية من الوظائف من أداة سطر الأوامر (command-line tool) `grep` التي تبحث عن نص (text) داخل الملفات. لهذا، سنستخدم العديد من المفاهيم التي ناقشناها في الفصول السابقة.

**الفصل 13** يستكشف الإغلاقات (closures) والمُكرِّرات (iterators): ميزات Rust التي تأتي من لغات البرمجة الوظيفية (functional programming languages). في **الفصل 14**، سنفحص Cargo بمزيد من العمق ونتحدث عن أفضل الممارسات (best practices) لمشاركة مكتباتك (libraries) مع الآخرين. **الفصل 15** يناقش المؤشرات الذكية (smart pointers) التي توفرها المكتبة القياسية (standard library) والسِمات (traits) التي تمكن وظائفها.

في **الفصل 16**، سنمر بنماذج مختلفة من البرمجة المتزامنة (concurrent programming) ونتحدث عن كيفية مساعدة Rust لك في البرمجة في خيوط متعددة (multiple threads) دون خوف. في **الفصل 17**، نبني على ذلك من خلال استكشاف بناء جملة (syntax) async و await في Rust، إلى جانب المهام (tasks)، والمستقبليات (futures)، والتدفقات (streams)، ونموذج التزامن خفيف الوزن (lightweight concurrency model) الذي تمكّنه.

**الفصل 18** يلقي نظرة على كيفية مقارنة أساليب Rust بمبادئ البرمجة كائنية التوجه (object-oriented programming) التي قد تكون على دراية بها. **الفصل 19** هو مرجع عن الأنماط (patterns) ومطابقة الأنماط (pattern matching)، وهي طرق قوية للتعبير عن الأفكار في جميع برامج Rust. **الفصل 20** يحتوي على مجموعة متنوعة من الموضوعات المتقدمة (advanced topics) ذات الاهتمام، بما في ذلك Rust غير الآمن (unsafe Rust)، والماكرو (macros)، والمزيد عن مدد الصلاحية (lifetimes)، والسِمات (traits)، والأنواع (types)، والدوال (functions)، والإغلاقات (closures).

في **الفصل 21**، سنكمل مشروعًا حيث سننفذ خادم ويب (web server) منخفض المستوى (low-level) متعدد الخيوط (multithreaded)!

أخيرًا، تحتوي بعض الملاحق على معلومات مفيدة عن اللغة بتنسيق أشبه بالمرجع. **الملحق A** يغطي الكلمات المفتاحية (keywords) في Rust، **الملحق B** يغطي العوامل (operators) والرموز (symbols) في Rust، **الملحق C** يغطي السِمات القابلة للاشتقاق (derivable traits) التي توفرها المكتبة القياسية (standard library)، **الملحق D** يغطي بعض أدوات التطوير (development tools) المفيدة، و**الملحق E** يشرح إصدارات (editions) Rust. في **الملحق F**، يمكنك العثور على ترجمات (translations) الكتاب، وفي **الملحق G** سنغطي كيفية صنع Rust وما هي Rust الليلية (nightly Rust).

لا توجد طريقة خاطئة لقراءة هذا الكتاب: إذا كنت ترغب في التخطي إلى الأمام، فافعل ذلك! قد تضطر إلى القفز مرة أخرى إلى الفصول السابقة إذا واجهت أي ارتباك. ولكن افعل ما يناسبك.

<span id="ferris"></span>

جزء مهم من عملية تعلم Rust هو تعلم كيفية قراءة رسائل الخطأ (error messages) التي يعرضها المصرِّف (compiler): هذه ستوجهك نحو كود عامل (working code). على هذا النحو، سنقدم العديد من الأمثلة التي لا تُترجم (compile) مع رسالة الخطأ (error message) التي سيعرضها لك المصرِّف في كل حالة. اعلم أنه إذا أدخلت وشغلت مثالًا عشوائيًا، فقد لا يُترجم (compile)! تأكد من قراءة النص المحيط لمعرفة ما إذا كان المثال الذي تحاول تشغيله من المفترض أن يحدث فيه خطأ. في معظم الحالات، سنوجهك إلى الإصدار الصحيح من أي كود لا يُترجم (compile). سيساعدك Ferris أيضًا على تمييز الكود الذي لا يُفترض أن يعمل:

| Ferris                                                                                                           | المعنى                            |
| ---------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris with a question mark"/>            | هذا الكود لا يُترجم!                |
| <img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris throwing up their hands"/>                   | هذا الكود يتسبب في ذعر (panic)!         |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris with one claw up, shrugging"/> | هذا الكود لا ينتج السلوك المطلوب. |

في معظم الحالات، سنوجهك إلى الإصدار الصحيح من أي كود لا يُترجم.

## الكود المصدري

الملفات المصدرية التي يُنشأ منها هذا الكتاب متاحة على GitHub:

- **الترجمة العربية**: [rust-lang-arabic/book][book-ar]
- **النسخة الأصلية بالإنجليزية**: [rust-lang/book][book-en]

[book-ar]: https://github.com/rust-lang-arabic/book/tree/main/src
[book-en]: https://github.com/rust-lang/book/tree/main/src
