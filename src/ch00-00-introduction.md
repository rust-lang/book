# บทนำ

> หมายเหตุ: หนังสือฉบับนี้เหมือนกับ [The Rust Programming Language][nsprust] ที่มีจำหน่ายในรูปแบบรูปเล่มและ ebook จาก [No Starch Press][nsp]

[nsprust]: https://nostarch.com/rust-programming-language-2nd-edition
[nsp]: https://nostarch.com/

ยินดีต้อนรับสู่ _The Rust Programming Language_ หนังสือแนะนำเกี่ยวกับ Rust ภาษาโปรแกรม Rust ช่วยให้คุณเขียนซอฟต์แวร์ที่เร็วขึ้นและเชื่อถือได้มากขึ้น การออกแบบภาษาโปรแกรมมักจะต้องเลือกระหว่างความง่ายในการใช้งานระดับสูง (high-level ergonomics) กับการควบคุมระดับต่ำ (low-level control) Rust ท้าทายความขัดแย้งนั้น ด้วยการสร้างสมดุลระหว่างความสามารถทางเทคนิคอันทรงพลังและประสบการณ์นักพัฒนาที่ยอดเยี่ยม Rust ให้ทางเลือกแก่คุณในการควบคุมรายละเอียดระดับต่ำ (เช่น การใช้หน่วยความจำ) โดยปราศจากความยุ่งยากที่มักจะเกี่ยวข้องกับการควบคุมดังกล่าว

## Rust เหมาะกับใคร

Rust เหมาะสำหรับหลายๆ คนด้วยเหตุผลที่หลากหลาย ลองมาดูบางกลุ่มที่สำคัญที่สุด

### ทีมของนักพัฒนา

Rust พิสูจน์แล้วว่าเป็นเครื่องมือที่มีประสิทธิผลสำหรับการทำงานร่วมกันระหว่างทีมขนาดใหญ่ของนักพัฒนาที่มีความรู้ด้านการเขียนโปรแกรมระบบในระดับต่างๆ กัน โค้ดระดับต่ำมีแนวโน้มที่จะเกิดข้อบกพร่องเล็กๆ น้อยๆ ที่ซ่อนอยู่ ซึ่งในภาษาอื่นๆ ส่วนใหญ่จะสามารถตรวจจับได้ผ่านการทดสอบอย่างละเอียดและการตรวจสอบโค้ดอย่างรอบคอบโดยนักพัฒนาที่มีประสบการณ์เท่านั้น ใน Rust คอมไพเลอร์มีบทบาทเป็นผู้เฝ้าประตูโดยปฏิเสธที่จะคอมไพล์โค้ดที่มีข้อบกพร่องที่เข้าใจยากเหล่านี้ รวมถึงข้อบกพร่องที่เกี่ยวกับการทำงานพร้อมกัน (concurrency bugs) ด้วยการทำงานร่วมกับคอมไพเลอร์ ทีมสามารถใช้เวลาไปกับการให้ความสำคัญกับตรรกะของโปรแกรมแทนที่จะไล่ตามแก้ไขข้อบกพร่อง

Rust ยังนำเครื่องมือสำหรับนักพัฒนาร่วมสมัยมาสู่โลกของการเขียนโปรแกรมระบบ:

- Cargo ซึ่งเป็นเครื่องมือจัดการ εξάρτηση (dependency) และเครื่องมือ build ที่รวมมาให้ ทำให้การเพิ่ม คอมไพล์ และจัดการ εξάρτηση (dependencies) เป็นเรื่องง่ายและสอดคล้องกันทั่วทั้งระบบนิเวศของ Rust
- เครื่องมือจัดรูปแบบ Rustfmt ช่วยให้มั่นใจได้ถึงสไตล์การเขียนโค้ดที่สอดคล้องกันระหว่างนักพัฒนา
- rust-analyzer ขับเคลื่อนการผสานรวมกับ Integrated Development Environment (IDE) สำหรับการเติมโค้ดและการแสดงข้อความแสดงข้อผิดพลาดแบบอินไลน์

ด้วยการใช้เครื่องมือเหล่านี้และเครื่องมืออื่นๆ ในระบบนิเวศของ Rust นักพัฒนาสามารถทำงานได้อย่างมีประสิทธิผลในขณะที่เขียนโค้ดระดับระบบ

### นักเรียนนักศึกษา

Rust เหมาะสำหรับนักเรียนนักศึกษาและผู้ที่สนใจเรียนรู้เกี่ยวกับแนวคิดของระบบ หลายคนได้เรียนรู้เกี่ยวกับหัวข้อต่างๆ เช่น การพัฒนาระบบปฏิบัติการโดยใช้ Rust ชุมชนนี้ให้การต้อนรับเป็นอย่างดีและยินดีที่จะตอบคำถามของนักเรียนนักศึกษา ด้วยความพยายามเช่นหนังสือเล่มนี้ ทีม Rust ต้องการทำให้แนวคิดของระบบสามารถเข้าถึงได้ง่ายขึ้นสำหรับผู้คนจำนวนมากขึ้น โดยเฉพาะผู้ที่เพิ่งเริ่มเขียนโปรแกรม

### บริษัท

บริษัทหลายร้อยแห่ง ทั้งขนาดใหญ่และขนาดเล็ก ใช้ Rust ในการผลิตสำหรับงานที่หลากหลาย รวมถึงเครื่องมือบรรทัดคำสั่ง, เว็บเซอร์วิส, เครื่องมือ DevOps, อุปกรณ์ฝังตัว, การวิเคราะห์และแปลงรหัสเสียงและวิดีโอ, สกุลเงินดิจิทัล, ชีวสารสนเทศศาสตร์, เครื่องมือค้นหา, แอปพลิเคชัน Internet of Things, การเรียนรู้ของเครื่อง และแม้แต่ส่วนสำคัญของเว็บเบราว์เซอร์ Firefox

### นักพัฒนาโอเพนซอร์ส

Rust เหมาะสำหรับผู้ที่ต้องการสร้างภาษาโปรแกรม Rust, ชุมชน, เครื่องมือสำหรับนักพัฒนา และไลบรารี เรายินดีเป็นอย่างยิ่งหากคุณมีส่วนร่วมในภาษา Rust

### ผู้ที่ให้ความสำคัญกับความเร็วและความเสถียร

Rust เหมาะสำหรับผู้ที่ต้องการความเร็วและความเสถียรในภาษาโปรแกรม ในด้านความเร็ว เราหมายถึงทั้งความเร็วที่โค้ด Rust สามารถทำงานได้และความเร็วที่ Rust ช่วยให้คุณเขียนโปรแกรมได้ การตรวจสอบของคอมไพเลอร์ Rust ช่วยให้มั่นใจได้ถึงความเสถียรผ่านการเพิ่มฟีเจอร์และการปรับโครงสร้างโค้ด (refactoring) ซึ่งแตกต่างจากโค้ดรุ่นเก่าที่เปราะบางในภาษาที่ไม่มีการตรวจสอบเหล่านี้ ซึ่งนักพัฒนามักจะกลัวที่จะแก้ไข ด้วยความมุ่งมั่นที่จะสร้าง zero-cost abstractions ซึ่งเป็นฟีเจอร์ระดับสูงที่คอมไพล์เป็นโค้ดระดับต่ำได้เร็วเท่ากับโค้ดที่เขียนด้วยมือ Rust พยายามทำให้โค้ดที่ปลอดภัยเป็นโค้ดที่รวดเร็วด้วย

ภาษา Rust หวังว่าจะสนับสนุนผู้ใช้อื่นๆ อีกมากมาย ผู้ที่กล่าวถึงในที่นี้เป็นเพียงผู้มีส่วนได้ส่วนเสียรายใหญ่ที่สุดบางส่วนเท่านั้น โดยรวมแล้ว ความทะเยอทะยานที่ยิ่งใหญ่ที่สุดของ Rust คือการขจัดข้อจำกัดที่โปรแกรมเมอร์ยอมรับมานานหลายทศวรรษ โดยมอบทั้งความปลอดภัย _และ_ ประสิทธิผล ความเร็ว _และ_ ความง่ายในการใช้งาน ลองใช้ Rust และดูว่าตัวเลือกของมันเหมาะกับคุณหรือไม่

## หนังสือเล่มนี้เหมาะสำหรับใคร

หนังสือเล่มนี้ตั้งสมมติฐานว่าคุณเคยเขียนโค้ดในภาษาโปรแกรมอื่นมาแล้ว แต่ไม่ได้ตั้งสมมติฐานว่าเป็นภาษาใด เราพยายามทำให้เนื้อหาเข้าถึงได้ในวงกว้างสำหรับผู้ที่มีพื้นฐานการเขียนโปรแกรมที่หลากหลาย เราไม่ได้ใช้เวลามากนักในการพูดถึงว่าการเขียนโปรแกรม _คือ_ อะไร หรือจะคิดเกี่ยวกับมันอย่างไร หากคุณยังใหม่กับการเขียนโปรแกรมทั้งหมด คุณควรอ่านหนังสือที่แนะนำเกี่ยวกับการเขียนโปรแกรมโดยเฉพาะจะดีกว่า

## วิธีใช้หนังสือเล่มนี้

โดยทั่วไป หนังสือเล่มนี้ตั้งสมมติฐานว่าคุณกำลังอ่านตามลำดับตั้งแต่ต้นจนจบ บทต่อๆ ไปจะสร้างขึ้นจากแนวคิดในบทก่อนหน้า และบทก่อนหน้าอาจไม่ได้ลงลึกในรายละเอียดของหัวข้อใดหัวข้อหนึ่ง แต่จะกลับมาทบทวนหัวข้อนั้นอีกครั้งในบทต่อๆ ไป

คุณจะพบกับบทสองประเภทในหนังสือเล่มนี้: บทแนวคิดและบทโครงงาน ในบทแนวคิด คุณจะได้เรียนรู้เกี่ยวกับแง่มุมต่างๆ ของ Rust ในบทโครงงาน เราจะสร้างโปรแกรมเล็กๆ ด้วยกัน โดยนำสิ่งที่คุณได้เรียนรู้มาประยุกต์ใช้ บทที่ 2, 12 และ 21 เป็นบทโครงงาน ส่วนที่เหลือเป็นบทแนวคิด

บทที่ 1 อธิบายวิธีการติดตั้ง Rust, วิธีการเขียนโปรแกรม “Hello, world!” และวิธีการใช้ Cargo ซึ่งเป็นตัวจัดการแพ็กเกจและเครื่องมือ build ของ Rust บทที่ 2 เป็นการแนะนำการเขียนโปรแกรมใน Rust แบบลงมือปฏิบัติ โดยให้คุณสร้างเกมทายตัวเลขขึ้นมา ที่นี่เราจะครอบคลุมแนวคิดในระดับสูง และบทต่อๆ ไปจะให้รายละเอียดเพิ่มเติม หากคุณต้องการลงมือทำทันที บทที่ 2 คือที่สำหรับสิ่งนั้น บทที่ 3 ครอบคลุมฟีเจอร์ของ Rust ที่คล้ายกับภาษาโปรแกรมอื่นๆ และในบทที่ 4 คุณจะได้เรียนรู้เกี่ยวกับระบบ ownership ของ Rust หากคุณเป็นผู้เรียนที่พิถีพิถันเป็นพิเศษและต้องการเรียนรู้ทุกรายละเอียดก่อนที่จะไปยังหัวข้อถัดไป คุณอาจต้องการข้ามบทที่ 2 และไปที่บทที่ 3 โดยตรง แล้วกลับมาที่บทที่ 2 เมื่อคุณต้องการทำโครงงานเพื่อประยุกต์ใช้รายละเอียดที่คุณได้เรียนรู้

บทที่ 5 กล่าวถึง structs และ methods และบทที่ 6 ครอบคลุม enums, `match` expressions และโครงสร้างควบคุมการทำงาน `if let` คุณจะใช้ structs และ enums เพื่อสร้างไทป์ที่กำหนดเองใน Rust

ในบทที่ 7 คุณจะได้เรียนรู้เกี่ยวกับระบบโมดูลของ Rust และเกี่ยวกับกฎความเป็นส่วนตัวสำหรับการจัดระเบียบโค้ดของคุณและ Application Programming Interface (API) สาธารณะของมัน บทที่ 8 กล่าวถึงโครงสร้างข้อมูล collection ทั่วไปบางอย่างที่ไลบรารีมาตรฐานมีให้ เช่น vectors, strings และ hash maps บทที่ 9 สำรวจปรัชญาและเทคนิคการจัดการข้อผิดพลาดของ Rust

บทที่ 10 เจาะลึกเกี่ยวกับ generics, traits และ lifetimes ซึ่งให้พลังแก่คุณในการกำหนดโค้ดที่ใช้ได้กับหลายไทป์ บทที่ 11 เป็นเรื่องเกี่ยวกับการทดสอบ ซึ่งแม้จะมีการรับประกันความปลอดภัยของ Rust ก็ยังจำเป็นเพื่อให้แน่ใจว่าตรรกะของโปรแกรมของคุณถูกต้อง ในบทที่ 12 เราจะสร้าง υλοποίηση (implementation) ของเราเองสำหรับส่วนย่อยของฟังก์ชันการทำงานจากเครื่องมือบรรทัดคำสั่ง `grep` ที่ค้นหาข้อความภายในไฟล์ สำหรับสิ่งนี้ เราจะใช้แนวคิดมากมายที่เราได้พูดคุยกันในบทก่อนหน้า

บทที่ 13 สำรวจ closures และ iterators: ฟีเจอร์ของ Rust ที่มาจากภาษาโปรแกรมเชิงฟังก์ชัน ในบทที่ 14 เราจะตรวจสอบ Cargo ในเชิงลึกมากขึ้นและพูดคุยเกี่ยวกับแนวทางปฏิบัติที่ดีที่สุดสำหรับการแบ่งปันไลบรารีของคุณกับผู้อื่น บทที่ 15 กล่าวถึง smart pointers ที่ไลบรารีมาตรฐานมีให้และ traits ที่เปิดใช้งานฟังก์ชันการทำงานของมัน

ในบทที่ 16 เราจะดูโมเดลต่างๆ ของการเขียนโปรแกรมพร้อมกัน (concurrent programming) และพูดคุยเกี่ยวกับวิธีที่ Rust ช่วยให้คุณเขียนโปรแกรมในหลายเธรดได้อย่างมั่นใจ ในบทที่ 17 เราจะต่อยอดจากสิ่งนั้นโดยการสำรวจ синтаксис async และ await ของ Rust พร้อมด้วย tasks, futures และ streams และโมเดลการทำงานพร้อมกันแบบ lightweight ที่พวกมันเปิดใช้งาน

บทที่ 18 ดูว่าสำนวนของ Rust เปรียบเทียบกับหลักการเขียนโปรแกรมเชิงวัตถุที่คุณอาจคุ้นเคยอย่างไร บทที่ 19 เป็นข้อมูลอ้างอิงเกี่ยวกับ patterns และ pattern matching ซึ่งเป็นวิธีการแสดงแนวคิดที่ทรงพลังทั่วทั้งโปรแกรม Rust บทที่ 20 ประกอบด้วยหัวข้อขั้นสูงที่น่าสนใจหลากหลาย รวมถึง unsafe Rust, macros และข้อมูลเพิ่มเติมเกี่ยวกับ lifetimes, traits, types, functions และ closures

ในบทที่ 21 เราจะทำโครงงานให้เสร็จสมบูรณ์ ซึ่งเราจะ υλοποιώ (implement) เว็บเซิร์ฟเวอร์แบบหลายเธรดระดับต่ำ!

สุดท้ายนี้ ภาคผนวกบางส่วนมีข้อมูลที่เป็นประโยชน์เกี่ยวกับภาษาในรูปแบบที่เหมือนข้อมูลอ้างอิงมากขึ้น **ภาคผนวก A** ครอบคลุม keywords ของ Rust, **ภาคผนวก B** ครอบคลุม operators และ symbols ของ Rust, **ภาคผนวก C** ครอบคลุม derivable traits ที่ไลบรารีมาตรฐานมีให้, **ภาคผนวก D** ครอบคลุมเครื่องมือพัฒนาที่มีประโยชน์บางอย่าง และ **ภาคผนวก E** อธิบาย Rust editions ใน **ภาคผนวก F** คุณสามารถค้นหาคำแปลของหนังสือ และใน **ภาคผนวก G** เราจะครอบคลุมวิธีการสร้าง Rust และ nightly Rust คืออะไร

ไม่มีวิธีที่ผิดในการอ่านหนังสือเล่มนี้: หากคุณต้องการข้ามไปข้างหน้า ก็ทำได้เลย! คุณอาจต้องย้อนกลับไปอ่านบทก่อนหน้าหากคุณสับสน แต่ทำในสิ่งที่เหมาะกับคุณ

<span id="ferris"></span>

ส่วนสำคัญของกระบวนการเรียนรู้ Rust คือการเรียนรู้วิธีอ่านข้อความแสดงข้อผิดพลาดที่คอมไพเลอร์แสดง: สิ่งเหล่านี้จะนำทางคุณไปสู่โค้ดที่ทำงานได้ ด้วยเหตุนี้ เราจะให้ตัวอย่างมากมายที่ไม่คอมไพล์พร้อมกับข้อความแสดงข้อผิดพลาดที่คอมไพเลอร์จะแสดงให้คุณเห็นในแต่ละสถานการณ์ โปรดทราบว่าหากคุณป้อนและรันตัวอย่างแบบสุ่ม มันอาจจะไม่คอมไพล์! ตรวจสอบให้แน่ใจว่าคุณได้อ่านข้อความโดยรอบเพื่อดูว่าตัวอย่างที่คุณพยายามจะรันนั้นตั้งใจให้เกิดข้อผิดพลาดหรือไม่ Ferris จะช่วยให้คุณแยกแยะโค้ดที่ไม่ได้ตั้งใจให้ทำงานได้ด้วย:

| Ferris                                                                                                           | ความหมาย                                         |
| ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris with a question mark"/>            | โค้ดนี้ไม่คอมไพล์!                      |
| <img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris throwing up their hands"/>                   | โค้ดนี้ panic!                                |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris with one claw up, shrugging"/> | โค้ดนี้ไม่ได้ให้ผลลัพธ์ตามที่ต้องการ |

ในสถานการณ์ส่วนใหญ่ เราจะนำคุณไปสู่เวอร์ชันที่ถูกต้องของโค้ดใดๆ ที่ไม่คอมไพล์

## ซอร์สโค้ด

ไฟล์ซอร์สโค้ดที่ใช้สร้างหนังสือเล่มนี้สามารถพบได้บน [GitHub][book]

[book]: https://github.com/rust-lang/book/tree/main/src
