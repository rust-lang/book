## تخصيص عمليات البناء باستخدام ملفات تعريف الإصدار

في Rust، _ملفات تعريف الإصدار_ (release profiles) هي ملفات تعريف محددة مسبقًا وقابلة للتخصيص مع
إعدادات مختلفة تسمح للمبرمج بالحصول على مزيد من التحكم في
خيارات متنوعة لتصريف الكود. كل ملف تعريف مُهيأ بشكل مستقل عن
الآخرين.

يحتوي Cargo على ملفي تعريف رئيسيين: ملف تعريف `dev` الذي يستخدمه Cargo عندما تشغّل `cargo
build`، وملف تعريف `release` الذي يستخدمه Cargo عندما تشغّل `cargo build
--release`. يتم تعريف ملف تعريف `dev` بإعدادات افتراضية جيدة للتطوير،
وملف تعريف `release` له إعدادات افتراضية جيدة لبناء الإصدار.

قد تكون أسماء ملفات التعريف هذه مألوفة من مخرجات عمليات البناء الخاصة بك:

<!-- manual-regeneration
anywhere, run:
cargo build
cargo build --release
and ensure output below is accurate
-->

```console
$ cargo build
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.00s
$ cargo build --release
    Finished `release` profile [optimized] target(s) in 0.32s
```

`dev` و `release` هما ملفات التعريف المختلفة المستخدمة من قبل المصرِّف.

يحتوي Cargo على إعدادات افتراضية لكل ملف من ملفات التعريف التي تُطبق عندما لا تكون قد
أضفت صراحةً أي أقسام `[profile.*]` في ملف _Cargo.toml_ الخاص بالمشروع.
من خلال إضافة أقسام `[profile.*]` لأي ملف تعريف تريد تخصيصه، يمكنك
تجاوز أي مجموعة فرعية من الإعدادات الافتراضية. على سبيل المثال، هنا القيم الافتراضية
لإعداد `opt-level` لملفات تعريف `dev` و `release`:

<span class="filename">اسم الملف: Cargo.toml</span>

```toml
[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
```

إعداد `opt-level` يتحكم في عدد التحسينات التي سيطبقها Rust على
كودك، بنطاق من 0 إلى 3. تطبيق المزيد من التحسينات يزيد من
وقت التصريف، لذا إذا كنت في مرحلة التطوير وتصرّف كودك بشكل متكرر،
ستريد تحسينات أقل للتصريف بشكل أسرع حتى لو كان الكود الناتج
يعمل بشكل أبطأ. `opt-level` الافتراضي لـ `dev` هو بالتالي `0`. عندما تكون
مستعدًا لإصدار كودك، من الأفضل قضاء وقت أطول في التصريف. ستصرّف
في وضع الإصدار مرة واحدة فقط، ولكنك ستشغل البرنامج المُصرَّف عدة مرات،
لذا فإن وضع الإصدار يضحي بوقت تصريف أطول مقابل كود يعمل بشكل أسرع. هذا هو
السبب في أن `opt-level` الافتراضي لملف تعريف `release` هو `3`.

يمكنك تجاوز إعداد افتراضي بإضافة قيمة مختلفة له في
_Cargo.toml_. على سبيل المثال، إذا أردنا استخدام مستوى التحسين 1 في
ملف تعريف التطوير، يمكننا إضافة هذين السطرين إلى ملف _Cargo.toml_
الخاص بمشروعنا:

<span class="filename">اسم الملف: Cargo.toml</span>

```toml
[profile.dev]
opt-level = 1
```

هذا الكود يتجاوز الإعداد الافتراضي `0`. الآن عندما نشغل `cargo build`،
سيستخدم Cargo الإعدادات الافتراضية لملف تعريف `dev` بالإضافة إلى تخصيصنا لـ
`opt-level`. نظرًا لأننا قمنا بتعيين `opt-level` إلى `1`، سيطبق Cargo المزيد من
التحسينات مقارنة بالإعداد الافتراضي، ولكن ليس بقدر ما هو موجود في بناء الإصدار.

للحصول على القائمة الكاملة لخيارات التكوين والإعدادات الافتراضية لكل ملف تعريف، راجع
[وثائق Cargo](https://doc.rust-lang.org/cargo/reference/profiles.html).
